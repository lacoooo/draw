<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>temp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        canvas {
            display: block;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body>
    <script src="../dist/draw.js"></script>
    <script>
        const d = new Draw({
            width: 1000,
            height: 800
        })

        let img

        const imgPos = new Vec3()

        d.preload(
            async () => {
                img = await d.loadImage('./1.jpg')
            }
        )

        d.setup(
            (ctx) => {
                ctx.lineWidth = 1
                ctx.strokeStyle = 'rgba(200,0,0,0.1)'
                d.setMouseHistoryCount(20)
            }
        )
        
        d.loop(
            (ctx) => {
                d.clear()
                const diff = Vec3.diff(new Vec3(d.mouseX, d.mouseY, 0), imgPos)
                diff.normalize()
                console.log(diff.x, diff.y)
                imgPos.add(diff)
                ctx.drawImage(img, imgPos.x, imgPos.y)
                // for(let i = 0; i < d.mousePosHistory.length - 1; i ++) {
                //     const a = d.mousePosHistory[i]
                //     const b = d.mousePosHistory[i + 1]
                //     const dist =
                //         Math.sqrt(
                //             Math.pow(Math.abs(b.x - a.x), 2)
                //             +
                //             Math.pow(Math.abs(b.y - a.y), 2)
                //         )
                //     d.strokeWeight(dist)
                //     d.line(a.x, a.y, b.x, b.y)
                // }
            }
        )

        d.click(
            (e) => {
                if (e === ' ') {
                    d.clear()
                }
            }
        )

    </script>
</body>

</html>