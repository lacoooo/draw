/*! License information can be found in draw.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.draw=e():t.draw=e()}(window,(function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){var n;window,n=function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="./src/index.ts")}({"./src/Canvas.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Draw",(function(){return d}));var n,i,r,o,h,a=s("./src/Input.ts"),u=s("./src/Vector.ts"),c=undefined&&undefined.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},l=undefined&&undefined.__classPrivateFieldSet||function(t,e,s){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,s),s};class d extends a.Input{constructor(t={init:{}}){super(),n.set(this,void 0),i.set(this,void 0),this.strokeOpen=!1,this.fillOpen=!1,r.set(this,{strokeOpen:!1,fillOpen:!1}),this.frame=0,o.set(this,!1),h.set(this,0),this.canvasElementInit(t.init),this.canvasSizeInit(t.init),this.mouseEventInit(c(this,n));const{preload:e,setup:s,loop:a,keyboard:u}=t;setTimeout(()=>{e&&this.preload(e),s&&this.setup(s),a&&this.loop(a),u&&this.keyboard(u)},0)}get width(){return c(this,n).width}set width(t){c(this,n).width=t}get height(){return c(this,n).height}set height(t){c(this,n).height=t}get center(){return new u.Vec3(this.width/2,this.height/2)}canvasElementInit(t){const{canvasId:e}=t||{};if(e){const t=document.getElementById(e);l(this,n,null!==t?t:this._createElement("canvas"))}else l(this,n,this._createElement("canvas")),document.body.appendChild(c(this,n));l(this,i,c(this,n).getContext("2d"))}canvasSizeInit(t){const{width:e,height:s}=t||{};this.width=e||window.innerWidth,this.height=s||window.innerHeight}_createElement(t="div"){return document.createElement(t)}preload(t){t&&t()}setup(t){this.setupParams||(this.setupParams=t),c(this,h)>0&&0===this.frame||t&&t(c(this,i))}loop(t){if(this.loopParams||(this.loopParams=t),c(this,h)>0&&0===this.frame)return;if(!0===document.hidden)return void requestAnimationFrame(this.loop.bind(this,t));this.frame++;const e=new u.Vec3(this.mouseX,this.mouseY);if(this.pushMousePosHistory(e),!t)throw Error("without callback");t(c(this,i)),!0!==c(this,o)&&requestAnimationFrame(this.loop.bind(this,t))}loopOnce(){l(this,o,!0)}strokeWeight(t){return c(this,i).lineWidth=t,this}beginPath(){return c(this,i).beginPath(),this}closePath(){return c(this,i).closePath(),this}save(){return c(this,i).save(),l(this,r,{strokeOpen:this.strokeOpen,fillOpen:this.fillOpen}),this}restore(){return c(this,i).restore(),this.strokeOpen=c(this,r).strokeOpen,this.fillOpen=c(this,r).fillOpen,this}line(t,e,s,n){return this.beginPath(),c(this,i).moveTo(t,e),c(this,i).lineTo(s,n),this.closePath(),this.draw(),this}dashline(t,e,s,n,r=[5,5]){return this.save(),this.beginPath(),c(this,i).setLineDash(r),c(this,i).moveTo(t,e),c(this,i).lineTo(s,n),this.draw(),this.restore(),this}rect(t,e,s=100,n=100){return this.beginPath(),c(this,i).rect(t,e,s,n),this.closePath(),this.draw(),this}circle(t,e,s){return this.save(),this.beginPath(),c(this,i).arc(e,s,t,0,2*Math.PI,!0),this.closePath(),this.draw(),this.restore(),this}point(t,e){return t=Math.round(t),e=Math.round(e),this.save(),this.strokeOpen=!1,this.fillOpen=!0,this.fillStyle(c(this,i).strokeStyle),c(this,i).lineWidth>1?this.circle(c(this,i).lineWidth/2,t,e):this.rect(t,e,1,1),this.restore(),this}image(t,e,s){return c(this,i).drawImage(t.img,e,s),this}translate(t,e){return c(this,i).translate(t,e),this}rotate(t){return c(this,i).rotate(t),this}scale(t,e=t){return c(this,i).scale(t,e),this}textSize(t){return c(this,i).font=t+"px sans-serif",this}text(t,e,s){return c(this,i).fillText(t,e,s),this}fillStyle(t){return c(this,i).fillStyle=t,this}strokeStyle(t){return c(this,i).strokeStyle=t,this}lineWidth(t){return c(this,i).lineWidth=t,this}getBezierPoints(t,e,s,n,i=100){let r=0;const o=[];for(let h=0;h<=i;h++){r=h/i;const a=Math.pow(r,3),u=t.clone().mult(Math.pow(1-r,3)).add(e.clone().mult(3*r*Math.pow(1-r,2))).add(s.clone().mult(3*(Math.pow(r,2)-a))).add(n.clone().mult(a));o.push(u)}return o}draw(){!0===this.fillOpen&&c(this,i).fill(),!0===this.strokeOpen&&c(this,i).stroke()}clear(){return c(this,i).clearRect(0,0,this.width,this.height),this}background(t){return t&&(c(this,i).fillStyle=t),c(this,i).fillRect(0,0,this.width,this.height),this}async loadMedia(t,e){l(this,h,+c(this,h)+1);const s=await fetch(t,{mode:"cors"})["catch"](t=>{throw new Error("There has been a problem with your fetch operation: "+t.message)});if(!s.ok)throw new Error("Network response was not ok.");const n=await s.blob()["catch"](t=>{throw new Error("There has been a problem with your response blob(): "+t.message)}),i=URL.createObjectURL(n);e&&e.img instanceof HTMLImageElement&&await new Promise(t=>{e.img.src=i,e.img.onload=()=>{const s=this._createElement("canvas"),n=s.getContext("2d");if(s.width=e.width,s.height=e.height,n){n.drawImage(e.img,0,0);const t=n.getImageData(0,0,s.width,s.height);e.pixels=t.data}t()},e.img.onerror=t=>{throw new Error("Image onload error: "+t)}}),l(this,h,+c(this,h)-1),0===c(this,h)&&0===this.frame&&setTimeout(()=>{this.setup(this.setupParams),this.loop(this.loopParams)},0)}loadImage(t){const e=new Image,s=new class{constructor(){this.img=e}get width(){return e.width}get height(){return e.height}getColor(t,e){t=Math.round(t),e=Math.round(e),t<0?t=0:t>this.width&&(t=this.width),e<0?e=0:e>this.height&&(e=this.height);const s=4*(t*e+t),n=this.pixels||[],i=[n[s],n[s+1],n[s+2],n[s+3]];return i.r=n[s],i.g=n[s+1],i.b=n[s+2],i.a=n[s+3],i}};return this.loadMedia(t,s),s}saveFrame(){const t=c(this,n).toDataURL("image/png"),e=document.createElement("a");e.download=String(+new Date+Math.round(1e3*Math.random())),e.href=t,document.body.appendChild(e),e.keyboard(),e.remove()}}n=new WeakMap,i=new WeakMap,r=new WeakMap,o=new WeakMap,h=new WeakMap},"./src/Geometry.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Line",(function(){return h}));var n,i=s("./src/Vector.ts"),r=undefined&&undefined.__classPrivateFieldSet||function(t,e,s){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,s),s},o=undefined&&undefined.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class h{constructor(t,e){n.set(this,void 0),r(this,n,[t.clone(),e.clone()])}static parallel(t,e){return Math.abs(t.slope-e.slope)<1e-4}static getIntersectionRay2D(t,e){if(h.parallel(t,e))return null;const s=(e.interception-t.interception)/(t.slope-e.slope),n=(t.slope*e.interception-t.interception*e.slope)/(t.slope-e.slope);return new i.Vec3(s,n)}get a(){return o(this,n)[0]}set a(t){o(this,n)[0]=t.clone()}get b(){return o(this,n)[1]}set b(t){o(this,n)[1]=t.clone()}get slope(){let t=this.b.x-this.a.x;return 0===t&&(t=1e-4),(this.b.y-this.a.y)/t}get interception(){return this.a.y-this.a.x*this.slope}get length(){return i.Vec3.diff(this.a,this.b).length}includePoint(t){const e=i.Vec3.diff(t,this.a).length+i.Vec3.diff(t,this.b).length-this.length;return Math.abs(e)<1e-4}}n=new WeakMap},"./src/Input.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Input",(function(){return u}));var n,i,r,o=s("./src/Vector.ts"),h=undefined&&undefined.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},a=undefined&&undefined.__classPrivateFieldSet||function(t,e,s){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,s),s};class u{constructor(){n.set(this,void 0),i.set(this,new o.Vec3),r.set(this,10),this.frame=0,this.frameLock=0,this.mousePosHistory=[],this.mouseDown=!1}get mousePos(){return h(this,i)}get mouseX(){return h(this,i).x}set mouseX(t){h(this,i).x=t}get mouseY(){return h(this,i).y}set mouseY(t){h(this,i).y=t}get pmouseX(){const t=this.mousePosHistory.length;return t>2?this.mousePosHistory[1].x:1===t?this.mousePosHistory[0].x:this.mouseX}get pmouseY(){const t=this.mousePosHistory.length;return t>2?this.mousePosHistory[1].y:1===t?this.mousePosHistory[0].y:this.mouseY}get canvasPos(){const t=h(this,n).getBoundingClientRect();return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}setMouseHistoryCount(t){a(this,r,t)}pushMousePosHistory(t){this.mousePosHistory.unshift(t),this.mousePosHistory.length>h(this,r)&&this.mousePosHistory.pop()}mouseEventInit(t){a(this,n,t),this.onmousemoveInit(),this.onmousedownInit(),this.onmouseupInit()}onmousemoveInit(){h(this,n).addEventListener("mousemove",t=>{const e=this.canvasPos;let s=0,n=0;t.pageX?(s=t.pageX,n=t.pageY):t.clientX&&(s=t.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,n=t.clientY+document.documentElement.scrollTop+document.body.scrollTop),this.mouseX=Math.round(s-e.left-window.scrollX),this.mouseY=Math.round(n-e.top-window.scrollY)},!1)}onmousedownInit(){document.body.addEventListener("mousedown",t=>{0===(t=t||window.event).button&&(this.mouseDown=!0)},!1)}onmouseupInit(){document.body.addEventListener("mouseup",t=>{0===(t=t||window.event).button&&(this.mouseDown=!1)},!1)}click(t){document.onkeydown=e=>{t(e.key,e.keyCode)}}}n=new WeakMap,i=new WeakMap,r=new WeakMap},"./src/Num.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Num",(function(){return n})),s.d(e,"Geom",(function(){return i}));class n{static equals(t,e,s=1e-5){return Math.abs(t-e)<s}static lerp(t,e,s){return(1-s)*t+s*e}static clamp(t,e,s){return Math.max(e,Math.min(s,t))}static within(t,e,s){return t>=Math.min(e,s)&&t<=Math.max(e,s)}static randomRange(t,e){const s=t>e?t-e:e-t;return t+Math.random()*s}static randomRangeInt(t,e){const s=t>e?t-e:e-t;return Math.round(t+Math.random()*s)}}class i{}},"./src/Vector.ts":function(t,e,s){"use strict";s.r(e),s.d(e,"Vec3",(function(){return o}));var n,i=undefined&&undefined.__classPrivateFieldSet||function(t,e,s){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,s),s},r=undefined&&undefined.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class o{constructor(t,e,s){n.set(this,void 0),i(this,n,new Float32Array([t||0,e||0,s||0]))}static add(t,e){return t.clone().add(e)}static diff(t,e){return t.clone().sub(e)}static mult(t,e){return t.clone().mult(e)}static div(t,e){return t.clone().div(e)}static dist(t,e){return t.clone().dist(e)}static equals(t,e){return t.equals(e)}static normalize(t){return t.clone().normalize()}static negative(t){return t.clone().negative()}static scale(t,e){return t.clone().scale(e)}static dot(t,e){return t.dot(e)}static cross(t,e){return t.cross(e)}static lerp(t,e,s){const n=t.x*(1-s)+e.x*s,i=t.y*(1-s)+e.y*s,r=t.z*(1-s)+e.z*s;return new o(n,i,r)}static getAngle(t,e=o.right){return t.getAngle(e)}static getRadian(t,e=o.right){return t.getRadian(e)}static radian2Degree(t){return 180*t/Math.PI}static getOrientationRadian(t,e=new o){return t.getOrientationRadian(e)}static getOrientationAngle(t,e=new o){return t.getOrientationAngle(e)}static degree2Radian(t){return t*Math.PI/180}static getRandomVec(t=100,e=t,s=t){const n=new o(Math.random()-.5,Math.random()-.5,Math.random()-.5);return n.normalize(),n.set(n.x*t,n.y*e,n.z*s),n}static getRandomGaussianVec(t=100,e=50){const s=()=>{let s,n,i,r;do{n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i}while(r>=1);return r=Math.sqrt(-2*Math.log(r)/r),s=n*r,s*(e||1)+(t||0)};return new o(s(),s())}static rotateZ(t,e){return t.clone().rotateZ(e)}static rotateX(t,e){return t.clone().rotateX(e)}static rotateY(t,e){return t.clone().rotateY(e)}static cartesian(t){return new o(Math.cos(t),Math.sin(t))}static astroid(t){const e=Math.sin(t),s=Math.cos(t),n=Math.pow(e,3),i=Math.pow(s,3);return new o(n,i)}static kampyle(t){const e=1/Math.sin(t),s=e,n=Math.tan(t)*e;return new o(s,n)}static rect_hyperbola(t){const e=1/Math.sin(t),s=Math.tan(t);return new o(e,s)}static superformula(t){const e=Math.pow(Math.abs(Math.cos(6*t/4)/1),7),s=Math.pow(Math.abs(Math.sin(6*t/4)/1),8),n=Math.pow(e+s,-1),i=Math.cos(t)*n,r=Math.sin(t)*n;return new o(i,r)}static swirl(t,e=1){const s=Math.pow(t.x,2)+Math.pow(t.y,2),n=Math.sin(s),i=Math.cos(s),r=.8*(n*t.x-i*t.y),h=.8*(i*t.y+n*t.y);return new o(e*r,e*h)}static sinusoidal(t,e=1){return new o(e*Math.sin(t.x),e*Math.sin(t.y))}static polar(t,e=1){const s=t.length,n=Math.atan2(t.x,t.y)/Math.PI;return new o(e*n,e*(s-2))}static power(t,e=1){const s=Math.atan2(t.y,t.x),n=Math.sin(s),i=Math.cos(s),r=e*Math.pow(t.length,n);return new o(r*i,r*n)}static cosine(t,e=1){const s=t.x*Math.PI,n=.8*e*Math.cos(s)*Math.cosh(t.y),i=.8*-e*Math.sin(s)*Math.sinh(t.y);return new o(n,i)}static vexp(t,e=1){const s=e*Math.exp((t.x+t.y)/2);return new o(s*Math.cos(t.y),s*Math.sin(t.y))}get x(){return r(this,n)[0]}set x(t){"number"==typeof t&&(r(this,n)[0]=t)}get y(){return r(this,n)[1]}set y(t){"number"==typeof t&&(r(this,n)[1]=t)}get z(){return r(this,n)[2]}set z(t){"number"==typeof t&&(r(this,n)[2]=t)}get length(){return Math.sqrt(this.squaredLength)}get squaredLength(){return Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2)}set(t,e,s){return this.x="number"==typeof t?t:this.x,this.y="number"==typeof e?e:this.y,this.z="number"==typeof s?s:this.z,this}reset(){return this.x=0,this.y=0,this.z=0,this}clone(){return new o(this.x,this.y,this.z)}add(t,e=0,s=0){return t instanceof o?(this.x+=t.x,this.y+=t.y,this.z+=t.z,this):(this.x+=t,this.y+=e,this.z+=s,this)}sub(t,e=0,s=0){return t instanceof o?(this.x-=t.x,this.y-=t.y,this.z-=t.z,this):(this.x-=t,this.y-=e,this.z-=s,this)}mult(t){return"number"==typeof t&&isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this):(console.warn("n is undefined or not a finite number"),this)}div(t){return"number"==typeof t&&isFinite(t)?0===t?(console.warn("n is 0"),this):(this.x/=t,this.y/=t,this.z/=t,this):(console.warn("n is undefined or not a finite number"),this)}dist(t,e=0,s=0){return t instanceof o?Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2)+Math.pow(t.z-this.z,2)):Math.sqrt(Math.pow(t-this.x,2)+Math.pow(e-this.y,2)+Math.pow(s-this.z,2))}equals(t){return!(Math.abs(this.x-t.x)>1e-5||Math.abs(this.y-t.y)>1e-5||Math.abs(this.z-t.z)>1e-5)}normalize(){const t=this.length;return t>1e-5&&(this.x/=t,this.y/=t,this.z/=t),this}negative(){return this.scale(-1)}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){const e=this.y*t.z-this.z*t.y,s=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return new o(e,s,n)}getAngle(t=o.right){const e=this.dot(t),s=Math.acos(e/(this.length*t.length));return o.radian2Degree(s)}getRadian(t=o.right){const e=this.dot(t);return Math.acos(e/(this.length*t.length))}getOrientationRadian(t=new o){const e=this.clone().sub(t);return Math.atan2(e.y,e.x)}getOrientationAngle(t=new o){const e=this.clone().sub(t),s=Math.atan2(e.y,e.x);return o.radian2Degree(s)}rotateZ(t){const e=o.degree2Radian(t);return this.x=this.x*Math.cos(e)-this.y*Math.sin(e),this.y=this.y*Math.cos(e)+this.x*Math.sin(e),this}rotateX(t){const e=o.degree2Radian(t);return this.z=this.z*Math.cos(e)-this.y*Math.sin(e),this.y=this.y*Math.cos(e)+this.z*Math.sin(e),this}rotateY(t){const e=o.degree2Radian(t);return this.x=this.x*Math.cos(e)-this.z*Math.sin(e),this.z=this.z*Math.cos(e)+this.x*Math.sin(e),this}}n=new WeakMap,o.zero=new o,o.up=new o(0,1),o.down=new o(0,-1),o.left=new o(-1,0),o.right=new o(1,0)},"./src/index.ts":function(t,e,s){"use strict";s.r(e);var n=s("./src/Canvas.ts"),i=s("./src/Num.ts"),r=s("./src/Vector.ts"),o=s("./src/Geometry.ts");window.Draw=n.Draw,window.Num=i.Num,window.Geom=i.Geom,window.Vec3=r.Vec3,window.Line=o.Line}})},t.exports=n()}])}));